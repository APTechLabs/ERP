<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Student ERP</title>
<style>
    body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: #f4f6f9;
    }

    .layout {
        display: flex;
        height: 100vh;
    }

    .sidebar {
        width: 250px;
        background: #2c3e50;
        color: white;
        display: flex;
        flex-direction: column;
        padding: 20px 0;
    }

    .sidebar h2 {
        text-align: center;
        margin-bottom: 30px;
        font-size: 1.3em;
        color: #ecf0f1;
    }

    .sidebar a {
        padding: 15px 20px;
        color: #ecf0f1;
        text-decoration: none;
        font-size: 1.1em;
        transition: background 0.2s;
    }

    .sidebar a:hover,
    .sidebar a.active {
        background: #34495e;
    }

    .main {
        flex: 1;
        padding: 30px;
        overflow-y: auto;
    }

    h3 {
        margin-top: 0;
        color: #2c3e50;
        border-bottom: 2px solid #16a085;
        padding-bottom: 10px;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 15px;
    }

    th, td {
        padding: 12px;
        border: 1px solid #ddd;
        text-align: center;
    }

    th {
        background: #16a085;
        color: white;
    }

    tr:hover {
        background: #eafaf7;
    }

    textarea {
        width: 100%;
        height: 100px;
        padding: 12px;
        border: 1px solid #ccc;
        border-radius: 6px;
        margin-top: 10px;
    }

    button {
        background: #2980b9;
        color: white;
        padding: 10px 18px;
        border: none;
        border-radius: 6px;
        margin-top: 10px;
        cursor: pointer;
    }

    button:hover {
        background: #3498db;
    }

    .logout {
        margin-top: auto;
        text-align: center;
        padding: 15px;
        background: #c0392b;
        color: white;
        text-decoration: none;
        font-size: 1.1em;
    }

    .logout:hover {
        background: #e74c3c;
    }

    .section {
        display: none;
    }
    .section.active {
        display: block;
    }
</style>
</head>
<body>
<div class="layout">
    <!-- Sidebar -->
    <div class="sidebar">
        <h2>Student Dashboard</h2>
        <a href="#" class="menu active" data-target="info">Information</a>
        <a href="#" class="menu" data-target="notices">Notices</a>
        <a href="#" class="menu" data-target="exams">Exam Schedule</a>
        <a href="#" class="menu" data-target="results">Results</a>
        <a href="#" class="menu" data-target="fees">Fees</a>
        <a href="#" class="menu" data-target="attendance">Attendance</a>
        <a href="#" class="menu" data-target="leave">Leave Notes</a>
        <a href="/logout" class="logout">Logout</a>
    </div>

    <!-- Main -->
    <div class="main">
        <!-- Information -->
        <div id="info" class="section active">
            <h3>Student Information</h3>
            <p><strong>Unique ID:</strong> {{ student.user_id }}</p>
            <p><strong>Full Name:</strong> {{ student.full_name }}</p>
            <p><strong>DOB:</strong> {{ student.dob }}</p>
            <p><strong>Email:</strong> {{ student.email }}</p>
            <p><strong>Phone:</strong> {{ student.phone }}</p>
            <p><strong>Address:</strong> {{ student.address }}</p>
        </div>

        <!-- Notices -->
        <div id="notices" class="section">
            <h3>Notices</h3>
            <ul>
                {% for notice in notices %}
                    <li>{{ notice.date }} - {{ notice.message }}</li>
                {% endfor %}
            </ul>
        </div>

        <!-- Exams -->
        <div id="exams" class="section">
            <h3>Exam Schedule</h3>
            <table>
                <tr>
                    <th>Subject</th>
                    <th>Date</th>
                    <th>Time</th>
                </tr>
                {% for exam in exams %}
                <tr>
                    <td>{{ exam.subject }}</td>
                    <td>{{ exam.date }}</td>
                    <td>{{ exam.time }}</td>
                </tr>
                {% endfor %}
            </table>
        </div>

        <!-- Results -->
        <div id="results" class="section">
            <h3>Results</h3>
            <table>
                <tr>
                    <th>Subject</th>
                    <th>Marks</th>
                    <th>Status</th>
                </tr>
                {% for result in results %}
                <tr>
                    <td>{{ result.subject }}</td>
                    <td>{{ result.marks }}</td>
                    <td>{{ 'Pass' if result.marks >= 40 else 'Fail' }}</td>
                </tr>
                {% endfor %}
            </table>
        </div>

        <!-- Fees -->
        <div id="fees" class="section">
            <h3>Fees</h3>
            <table>
                <tr>
                    <th>Total</th>
                    <th>Paid</th>
                    <th>Due</th>
                    <th>Due Date</th>
                </tr>
                {% for f in fees %}
                <tr>
                    <td>{{ f.total }}</td>
                    <td>{{ f.paid }}</td>
                    <td>{{ f.total - f.paid }}</td>
                    <td>{{ f.due_date }}</td>
                </tr>
                {% endfor %}
            </table>
        </div>

        <!-- Attendance -->
        <div id="attendance" class="section">
            <h3>Attendance</h3>
            <p><strong>Present:</strong> {{ attendance.present }} days</p>
            <p><strong>Absent:</strong> {{ attendance.absent }} days</p>
            <p><strong>Attendance %:</strong> {{ attendance.percentage }}%</p>
        </div>

        <!-- Leave Notes -->
        <div id="leave" class="section">
            <h3>Leave Notes</h3>
            <form method="POST" action="/leave_note">
                <textarea name="note" placeholder="Write your leave note here..."></textarea>
                <button type="submit">Submit Leave Note</button>
            </form>
            <ul>
                {% for note in leave_notes %}
                    <li>{{ note.date }} - {{ note.text }}</li>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>

<script>
    const menuItems = document.querySelectorAll(".menu");
    const sections = document.querySelectorAll(".section");

    menuItems.forEach(item => {
        item.addEventListener("click", e => {
            e.preventDefault();

            menuItems.forEach(i => i.classList.remove("active"));
            item.classList.add("active");

            sections.forEach(sec => sec.classList.remove("active"));
            document.getElementById(item.dataset.target).classList.add("active");
        });
    });
</script>
</body>
</html>
