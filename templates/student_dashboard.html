<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Student ERP</title>
<link rel="stylesheet" href="{{ url_for('static', filename='css/student_dashboard.css') }}">
</head>
<body>
<div class="layout">
    <!-- Sidebar -->
    <div class="sidebar">
        <h2>Student Dashboard</h2>
        <a href="#" class="menu active" data-target="info">Information</a>
        <a href="#" class="menu" data-target="notices">Notices</a>
        <a href="#" class="menu" data-target="exams">Exam Schedule</a>
        <a href="#" class="menu" data-target="results">Results</a>
        <a href="#" class="menu" data-target="fees">Fees</a>
        <a href="#" class="menu" data-target="attendance">Attendance</a>
        <a href="#" class="menu" data-target="leave">Leave Notes</a>
        <a href="/logout" class="logout">Logout</a>
    </div>

    <!-- Main -->
    <div class="main">
        <!-- Information -->
        <div id="info" class="section active">
            <h3>Student Information</h3>
            <p><strong>Unique ID:</strong> {{ student.user_id }}</p>
            <p><strong>Full Name:</strong> {{ student.full_name }}</p>
            <p><strong>DOB:</strong> {{ student.dob }}</p>
            <p><strong>Email:</strong> {{ student.email }}</p>
            <p><strong>Phone:</strong> {{ student.phone }}</p>
            <p><strong>Address:</strong> {{ student.address }}</p>
        </div>

        <!-- Notices -->
        <div id="notices" class="section">
            <h3>Notices</h3>
            <ul>
                {% for notice in notices %}
                    <li>{{ notice.date }} - {{ notice.message }}</li>
                {% endfor %}
            </ul>
        </div>

        <!-- Exams -->
        <div id="exams" class="section">
            <h3>Exam Schedule</h3>
            <table>
                <tr>
                    <th>Subject</th>
                    <th>Date</th>
                    <th>Time</th>
                </tr>
                {% for exam in exams %}
                <tr>
                    <td>{{ exam.subject }}</td>
                    <td>{{ exam.date }}</td>
                    <td>{{ exam.time }}</td>
                </tr>
                {% endfor %}
            </table>
        </div>

        <!-- Results -->
        <div id="results" class="section">
            <h3>Results</h3>
            <table>
                <tr>
                    <th>Subject</th>
                    <th>Marks</th>
                    <th>Status</th>
                </tr>
                {% for result in results %}
                <tr>
                    <td>{{ result.subject }}</td>
                    <td>{{ result.marks }}</td>
                    <td>{{ 'Pass' if result.marks >= 40 else 'Fail' }}</td>
                </tr>
                {% endfor %}
            </table>
        </div>

        <!-- Fees -->
        <div id="fees" class="section">
            <h3>Fees</h3>
            <table>
                <tr>
                    <th>Total</th>
                    <th>Paid</th>
                    <th>Due</th>
                    <th>Due Date</th>
                </tr>
                {% for f in fees %}
                <tr>
                    <td>{{ f.total }}</td>
                    <td>{{ f.paid }}</td>
                    <td>{{ f.total - f.paid }}</td>
                    <td>{{ f.due_date }}</td>
                </tr>
                {% endfor %}
            </table>
        </div>

        <!-- Attendance -->
        <div id="attendance" class="section">
            <h3>Attendance</h3>
            <p><strong>Present:</strong> {{ attendance.present }} days</p>
            <p><strong>Absent:</strong> {{ attendance.absent }} days</p>
            <p><strong>Attendance %:</strong> {{ attendance.percentage }}%</p>
        </div>

        <!-- Leave Notes -->
        <div id="leave" class="section">
            <h3>Leave Notes</h3>
            <form method="POST" action="/leave_note">
                <textarea name="note" placeholder="Write your leave note here..."></textarea>
                <button type="submit">Submit Leave Note</button>
            </form>
            <ul>
                {% for note in leave_notes %}
                    <li>{{ note.date }} - {{ note.text }}</li>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>

<script src="{{ url_for('static', filename='js/student_dashboard.js') }}"></script>
</body>
</html>
